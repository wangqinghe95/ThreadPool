# threadpool version for c
+ A threadpool implemented by c

## Compile && run
+ gcc *.c -o main -lpthread && ./main

## Implement
1. 线程池操作
    + 线程池创建，初始化
    + 线程池销毁，资源释放
    + 添加任务函数
    + 执行任务函数
    + 管理线程池函数
2. 线程池属性
    + 一个线程任务队列
    + 一个工作线程数组，即线程池
    + 一个工作锁确保使用者互斥的使用线程池
    + 一个忙线程锁，单独统计正在工作的线程数量，管理数量使用，创建线程或者销毁线程
    + 一个管理线程 tid
3. 任务队列
    + 一个任务数组，实现线程执行任务的队列模拟
    + 队列的最大容量，队列中当前任务数量，队列头尾
    + 两个条件变量，队未满和队未空的消息，控制任务的有序添加

## 任务流程
1. 线程池初始化，然后初始化后的线程阻塞在工作线程的锁处，等待任务添加
2. 向线程池中的任务队列中添加任务，并通知阻塞的工作线程，当前队伍队列不空
3. 等待的工作线程竞争，有一个线程抢到任务锁，从任务序列中取出一个任务，执行，并通知任务队列未满。
    + 任务执行结束后循化继续等待
4. 管理线程池的管理线程 5s 循环一次检查当前的线程状态，正在执行的线程数，等待执行的线程数，和任务队列中的任务数
    + 如果当前任务队列中等待被执行的任务数，大于设定的最小等待任务数，那么将构造指定数量的线程去执行任务
    + 如果有一半线程是等待状态，就取消一定数量的线程数